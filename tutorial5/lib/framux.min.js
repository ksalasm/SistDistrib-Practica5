window.d$=window.domux=domux=function(a){return new domux.find(a)};var domux={version:"0.0.1",arr:[],find:function(a){if(a.indexOf("#")==0)return domux.id(a.substring(1,a.length));else return domux.tag(a)},id:function(a){domux.arr=new Array;domux.arr.push(document.getElementById(a));return domux},tag:function(a){domux.arr=new Array;var b=document.getElementsByTagName(a);for(i=0;i<b.length;i++)domux.arr.push(b.item(i));return domux},outer:function(a){for(i=0;i<domux.arr.length;i++)domux.arr[i].outerHTML=a;return domux},inner:function(a){for(i=0;i<domux.arr.length;i++)domux.arr[i].innerHTML=a;return domux},top:function(a){for(i=0;i<domux.arr.length;i++)domux.arr[i].innerHTML=domux.arr[i].innerHTML+a;return domux},bottom:function(a){for(i=0;i<domux.arr.length;i++)domux.arr[i].innerHTML=a+domux.arr[i].innerHTML;return domux},after:function(a){for(i=0;i<domux.arr.length;i++)domux.arr[i].outerHTML=domux.arr[i].outerHTML+a;return domux},before:function(a){for(i=0;i<domux.arr.length;i++)domux.arr[i].outerHTML=a+domux.arr[i].outerHTML;return domux},update:function(a){for(i=0;i<domux.arr.length;i++){var b=domux.arr[i].innerHTML;domux.arr[i].outerHTML=a;domux.arr[i].innerHTML=b}return domux},toStr:function(){var a="";for(i=0;i<domux.arr.length;i++)a+=domux.arr[i].innerHTML;return a},html:function(a,b){if(a==null)return domux.toStr();if(b==null)position="inner";if(b==="outer")return domux.outer(a);else if(b==="inner")return domux.inner(a);else if(b==="top")return domux.top(a);else if(b==="bottom")return domux.bottom(a);else if(b==="after")return domux.after(a);else if(b==="before")return domux.before(a);else if(b==="update")return domux.update(a);else return domux}};var xhr=function(a,b,c,d,e,f){try{if(c==null)c="GET";var g=b!=null;if(window.XMLHttpRequest)xhttp=new XMLHttpRequest;else xhttp=new ActiveXObject("Microsoft.XMLHTTP");if(g){xhttp.onreadystatechange=function(){if(xhttp.readyState==4){b(xhttp.responseText)}}}if(e&&xhttp.overrideMimeType)xhttp.overrideMimeType(e);if(e)xhttp.setRequestHeader("Accept",e);if(f)for(i=0;i<f.length;i++)xhttp.setRequestHeader(f[i].header,f[i].value);xhttp.open(c,a,g);xhttp.send(d);if(!g)return xhttp.responseText}catch(h){if(typeof console==="undefined"||typeof console.log==="undefined");else console.log("Error opening "+a)}};(function(){function encodeHTMLSource(){var a={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},b=/&(?!#?\w+;)|<|>|"|'|\//g;return function(c){return c?c.toString().replace(b,function(b){return a[b]||b}):c}}function resolveDefs(c,block,def){return(typeof block==="string"?block:block.toString()).replace(c.define||skip,function(m,code,assign,value){if(code.indexOf("def.")===0){code=code.substring(4)}if(!(code in def)){if(assign===":"){def[code]=value}else{eval("def['"+code+"']="+value)}}return""}).replace(c.use||skip,function(m,code){var v=eval(code);return v?resolveDefs(c,v,def):v})}function unescape(a){return a.replace(/\\('|\\)/g,"$1").replace(/[\r\t\n]/g," ")}"use strict";var doT={version:"0.2.0",templateSettings:{evaluate:/\{\{([\s\S]+?)\}\}/g,interpolate:/\{\{=([\s\S]+?)\}\}/g,encode:/\{\{!([\s\S]+?)\}\}/g,use:/\{\{#([\s\S]+?)\}\}/g,define:/\{\{##\s*([\w\.$]+)\s*(\:|=)([\s\S]+?)#\}\}/g,conditional:/\{\{\?(\?)?\s*([\s\S]*?)\s*\}\}/g,iterate:/\{\{~\s*(?:\}\}|([\s\S]+?)\s*\:\s*([\w$]+)\s*(?:\:\s*([\w$]+))?\s*\}\})/g,varname:"it",strip:true,append:true,selfcontained:false},template:undefined,compile:undefined};var global=function(){return this||(0,eval)("this")}();if(typeof module!=="undefined"&&module.exports){module.exports=doT}else if(typeof define==="function"&&define.amd){define(function(){return doT})}else{global.doT=doT}global.encodeHTML=encodeHTMLSource();var startend={append:{start:"'+(",end:")+'",startencode:"'+encodeHTML("},split:{start:"';out+=(",end:");out+='",startencode:"';out+=encodeHTML("}},skip=/$^/;doT.template=function(a,b,c){b=b||doT.templateSettings;var d=b.append?startend.append:startend.split,e,f,g=0,h;if(b.use||b.define){var i=global.def;global.def=c||{};e=resolveDefs(b,a,global.def);global.def=i}else e=a;e=("var out='"+(b.strip?e.replace(/(^|\r|\n)\t* +| +\t*(\r|\n|$)/g," ").replace(/\r|\n|\t|\/\*[\s\S]*?\*\//g,""):e).replace(/'|\\/g,"\\$&").replace(b.interpolate||skip,function(a,b){return d.start+unescape(b)+d.end}).replace(b.encode||skip,function(a,b){f=true;return d.startencode+unescape(b)+d.end}).replace(b.conditional||skip,function(a,b,c){return b?c?"';}else if("+unescape(c)+"){out+='":"';}else{out+='":c?"';if("+unescape(c)+"){out+='":"';}out+='"}).replace(b.iterate||skip,function(a,b,c,d){if(!b)return"';} } out+='";g+=1;h=d||"i"+g;b=unescape(b);return"';var arr"+g+"="+b+";if(arr"+g+"){var "+c+","+h+"=-1,l"+g+"=arr"+g+".length-1;while("+h+"<l"+g+"){"+c+"=arr"+g+"["+h+"+=1];out+='"}).replace(b.evaluate||skip,function(a,b){return"';"+unescape(b)+"out+='"})+"';return out;").replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/(\s|;|}|^|{)out\+='';/g,"$1").replace(/\+''/g,"").replace(/(\s|;|}|^|{)out\+=''\+/g,"$1out+=");if(f&&b.selfcontained){e="var encodeHTML=("+encodeHTMLSource.toString()+"());"+e}try{return new Function(b.varname,e)}catch(j){if(typeof console!=="undefined")console.log("Could not create a template function: "+e);throw j}};doT.compile=function(a,b){return doT.template(a,null,b)}})();(function(a){var b=[];var c={};var d=function(a,b){this.name=b;this.path=a;this.keys=[];this.fns=[];this.params={};this.regex=e(this.path,this.keys,false,false)};d.prototype.addHandler=function(a){this.fns.push(a);var b=h();i(b,this)};d.prototype.removeHandler=function(a){for(var b=0,c=this.fns.length;b<c;b++){var d=this.fns[b];if(a==d){this.fns.splice(b,1);return}}};d.prototype.run=function(a){for(var b=0,c=this.fns.length;b<c;b++){this.fns[b].apply(this,a)}};d.prototype.match=function(a,b){var c=this.regex.exec(a);if(!c)return false;for(var d=1,e=c.length;d<e;++d){var f=this.keys[d-1];var g="string"==typeof c[d]?decodeURIComponent(c[d]):c[d];if(f){this.params[f.name]=g}b.push(g)}return true};d.prototype.toURL=function(a){var b=this.path;for(var c in a){b=b.replace("/:"+c,"/"+a[c])}b=b.replace(/\/:.*\?/g,"/").replace(/\?/g,"");if(b.indexOf(":")!=-1){throw new Error("missing parameters for url: "+b)}return b};var e=function(a,b,c,d){if(a instanceof RegExp)return a;if(a instanceof Array)a="("+a.join("|")+")";a=a.concat(d?"":"/?").replace(/\/\(/g,"(?:/").replace(/\+/g,"__plus__").replace(/(\/)?(\.)?:(\w+)(?:(\(.*?\)))?(\?)?/g,function(a,c,d,e,f,g){b.push({name:e,optional:!!g});c=c||"";return""+(g?"":c)+"(?:"+(g?c:"")+(d||"")+(f||d&&"([^/.]+?)"||"([^/]+?)")+")"+(g||"")}).replace(/([\/.])/g,"\\$1").replace(/__plus__/g,"(.+)").replace(/\*/g,"(.*)");return new RegExp("^"+a+"$",c?"":"i")};var f=function(a,e){var f=a.split(" ");var g=f.length==2?f[0]:null;a=f.length==2?f[1]:f[0];if(!c[a]){c[a]=new d(a,g);b.push(c[a])}c[a].addHandler(e)};var g=function(a,b){if(typeof b=="function"){f(a,b)}else if(typeof a=="object"){for(var c in a){f(c,a[c])}}else if(typeof b==="undefined"){window.location.hash=a}};g.lookup=function(a,c){for(var d=0,e=b.length;d<e;d++){var f=b[d];if(f.name==a){return f.toURL(c)}}};g.remove=function(a,b){var d=c[a];if(!d)return;d.removeHandler(b)};g.removeAll=function(){c={};b=[]};var h=function(){return window.location.hash.substring(1)};var i=function(a,b){var c=[];if(b.match(a,c)){b.run(c);return true}return false};var j=function(){var a=h();for(var c=0,d=b.length;c<d;c++){var e=b[c];if(i(a,e))return}};if(a.addEventListener){a.addEventListener("hashchange",j)}else{a.attachEvent("onhashchange",j)}a.routie=g})(window);!function(a){if(typeof define==="function"&&define.amd){define(a)}else{window.onDomReady=a()}}(function(){function o(a){if(!m){if(!b.body){return q(o)}m=true;while(a=n.shift()){q(a)}}}function p(){if(k){b.removeEventListener(i,p,d);o()}else if(b[f]===e){b.detachEvent(j,p);o()}}function q(a,b){setTimeout(a,+b>=0?b:1)}function s(a){m?q(a):n.push(a)}"use strict";var a=window,b=a.document,c=b.documentElement,d=false,e="complete",f="readyState",g="attachEvent",h="addEventListener",i="DOMContentLoaded",j="onreadystatechange",k=h in b,l=d,m=d,n=[];if(b[f]===e){q(o)}else if(k){b[h](i,p,d);a[h]("load",o,d)}else{b[g](j,p);a[g]("onload",o);try{l=a.frameElement==null&&c}catch(r){}if(l&&l.doScroll){(function t(){if(!m){try{l.doScroll("left")}catch(a){return q(t,50)}o()}})()}}s.version="1.2";return s});var $global={};var framux={varname:"$",version:"0.0.3",current:null,templates:{},controllers:{},call:function(a,b){framux.controllers[a.controller].params=b;framux.current=framux.controllers[a.controller];window[a.controller].call(this,a.bindings,b)},go:function(a){onDomReady(function(){routie(a)});return framux},route:function(a,b){doT.templateSettings.varname=framux.varname;onDomReady(function(){if(typeof b.bindings==="undefined")b.bindings={};if(typeof b.location==="undefined")b.location="inner";if(typeof b.template==="undefined")framux.templates[b.controller]=function(a){return""};framux.controllers[b.controller]=b;routie(a,function(){var a=arguments;if(typeof framux.templates[b.controller]==="undefined"){xhr(b.template,function(c){framux.templates[b.controller]=doT.template(c);framux.call(b,a)})}else framux.call(b,a)})});return framux},bind:function(a,b){if(a.indexOf(framux.varname)!=0)return;var c=a.split(".");var d=framux.current.bindings;var e=1;for(;e<c.length-1;e++)d=d[c[e]];d[c[e]]=b.value;framux.render()},render:function(){var a=framux.templates[framux.current.controller];var b=framux.current.bindings;var c=framux.current.location;d$(framux.current.selector).html(a(b),c)}}